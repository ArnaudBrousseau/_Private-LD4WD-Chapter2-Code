<!DOCTYPE html>
<html lang="en"> 
  <head> 
  	<meta charset="utf-8"> 
  	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
  	<meta name="description" content="From a movie to related artists -- a linked data story">
    <meta name="author" content=" Thomas Steiner, Arnaud Brousseau">
    
  	<title>From a movie to related artists -- a linked data story</title> 
  	
  	<link rel="stylesheet" href="css/reset.css" /> 
  	<link rel="stylesheet" href="http://jqueryui.com/themes/base/jquery.ui.theme.css">
  	<link rel="stylesheet" href="http://jqueryui.com/themes/base/jquery.ui.autocomplete.css">
  	
  	<link rel="stylesheet" href="css/woo.css" /> 

    <script src="js/libs/modernizr-1.7.min.js"></script>

  </head> 
  <body>
    <h1>From a movie to related artists: a linked data story</h1>  
    <nav>
      <ul>
        <li>
          <a href="#" id="stop">Emergency Stop :)</a> 
        </li>
        <li>
          <a href="#" id="complexTree">Complex tree</a>
        </li>
        <li>
          <a href="">Restart</a>
        </li>
    </nav>
    <form class="ui-widget"> 
    	<label for="movie">Think about your favorite movie, and press "Enter": </label> 
    	<input type="text" id="movie" /> 
    </form>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
    <script>window.jQuery || document.write('<script src="js/libs/jquery-1.5.1.min.js">\x3C/script>')</script>
  	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
  	
  	<script src="js/libs/objectHandler.js"></script>
  	<script src="js/libs/protovis-r3.2.js"></script>
  	
  	<script src="js/semanticDealer.js"></script>
  	<script src="js/dataFetcher.js"></script>
  	<script src="js/treeBuilder.js"></script> 
  	<script src="js/app.js"></script> 	
  	<script type="text/javascript+protovis">
  	  //For some reason, the JS can't be external. Has to do with the weird javascript+protovis type and MIME type.
  	  var render = function(json, rootName, breadth){
        
        if(!breadth){var breadth = 20;}
        
        var svgElements = document.getElementsByTagName('svg');
        if(svgElements){
        	for(var i=0; i<svgElements.length ; i++){
        		svgElements[i].parentElement.removeChild(svgElements[i]);
        		console.log('removing SVG Element');
        	}
        }

        var vis = new pv.Panel()
            .width(960)
            .height(800);

        var tree = vis.add(pv.Layout.Tree).left(-250)
            .nodes(pv.dom(json).root(rootName).nodes())
            .depth(65)
            .breadth(breadth)
            .orient("radial");

        tree.link.add(pv.Line);

        tree.node.add(pv.Dot).fillStyle(function(n) n.firstChild ? "#aec7e8" : "#ff7f0e" );
        tree.label.add(pv.Label)
        .text(function(n) n.firstChild ? n.nodeName: n.nodeValue )
        .textStyle(function(n) n.firstChild ? "#999" : "#333" );

        vis.render();

        console.log('rendering done');

      }
  	</script>
  	
  </body> 
</html>